# 什么是操作系统

要写一个操作系统内核，首先要明白什么是操作系统。

说白了，操作系统就是一个环境，一个分配计算机资源的软件。

最开始的时候，世界上是没有操作系统的，计算机也不像今天这么强大。人们把一坨一坨记录着程序的打孔卡片送进小房间，然后等待运行结果从另一个小房间打印出来。这个过程中的时间基本上都被一个人用掉了，必须要等这个人搞定了才能换下一个人，这肯定是不合理的。于是，出现了联机批处理系统，把作业一批一批地输入计算机、一批一批地计算，节省了大家的时间。

后来，计算机越来越快，导致这边刚刚读完卡片、那边就把结果算好了，大量的宝贵的计算机时间浪费在了扫描小卡片和打印运算结果上了。于是，脱机批处理技术在这个时候出现的。但是这个时候，CPU一次还是只能运行一个程序，这个程序运行到一半需要`I/O`的时候，还是只能停下来发呆，而`I/O`比起CPU又极其慢。于是，为了压榨CPU，多道程序系统出现了。在这个阶段，计算机一次读入多个程序，当一个程序准备进行`I/O`的时候，CPU就保存它的现场，马上切换到另一个程序，等到`I/O`结束的时候，再换回来。支持CPU和`I/O`分别运作的技术是通道技术，通道专门负责进行`I/O`操作，等到`I/O`完毕的时候，它就告诉CPU说`I/O`已经好了。

再然后，出现了分时技术，多个人可以同时使用计算机并且感觉不到计算机正在被别人使用；再然后，出现了实时系统；再然后，出现了各种各样其他的系统……

当然，各种各样的系统有其各自的设计目的，例如飞机上使用实时系统、个人电脑使用分时系统等；为不同设备设计的系统也不一样，比如个人电脑可以为了操作体验牺牲性能，而服务器总是要以性能优先等。操作系统就是为了合理分配计算机资源使之适用于各种各样的目的、并且为运行其上的软件提供一个运行时环境而诞生的。这里的计算机资源不仅包括硬件资源，也包括软件资源。

> 随着时代的发展，硬件在不断更新换代，操作系统也在不断演化，操作系统的功能会因为应用场景的不同而具有不同的特点，但它的根本目的依然是为了方便人们对硬件设备的使用和交互。
>
> ——《一个64位操作系统的设计与实现》1.1 什么是操作系统
